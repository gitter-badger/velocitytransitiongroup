!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("velocity-animate")):"function"==typeof define&&define.amd?define(["react","velocity-animate"],t):"object"==typeof exports?exports.VelocityTransitionGroup=t(require("react"),require("velocity-animate")):e.VelocityTransitionGroup=t(e.React,e.Velocity)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;s=l=p=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var p=s.get;return void 0===p?void 0:p.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=a,n=o,r=!0}},p=n(1),l=r(p),u=n(2),h=r(u),f=n(3),c=r(f),d=n(4),v=r(d),VelocityTransitionGroup=function(e){function VelocityTransitionGroup(e){i(this,VelocityTransitionGroup),s(Object.getPrototypeOf(VelocityTransitionGroup.prototype),"constructor",this).call(this,e),this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[],this.prevChildMapping=null,this.nextChildMapping=null,this.totalHeight=0,this.lastTotalHeight=0,this.defaults=l["default"].extend({display:"auto"},this.props.defaults),this.state={children:this._getCurrentChildMapping()}}return a(VelocityTransitionGroup,e),o(VelocityTransitionGroup,[{key:"componentDidMount",value:function(){this.totalHeight=this._getTotalHeight(this.state.children),this._appear()}},{key:"componentWillReceiveProps",value:function(e){this.prevChildMapping=this.state.children,this.nextChildMapping=this._getCurrentChildMapping(e.children);var t=this.prevChildMapping,n=this.nextChildMapping;this.setState({children:v["default"].mergeChildMappings(t,n)});for(var r in n){var i=t&&t.hasOwnProperty(r);!n[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var r in t){var a=n&&n.hasOwnProperty(r);!t[r]||a||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}}},{key:"componentDidUpdate",value:function(){var e=this,t=this.keysToEnter;this.keysToEnter=[];var n=this.keysToLeave;this.keysToLeave=[],t.length<=0&&n.length<=0||(this.props.wrapper&&(this.totalHeight=0,this.totalHeight=this._getTotalHeight(this.nextChildMapping)),this._hideElements(t),n.length<=0?(this._animateWrapper(),this._enter(t)):this._leave(n,function(){e._animateWrapper(),e._enter(t)}))}},{key:"_getTotalHeight",value:function(e){function t(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+=parseInt(n.marginTop)+parseInt(n.marginBottom)}var n=0;for(var r in e){var i=h["default"].findDOMNode(this.refs[r]);n+=t(i)}return n}},{key:"_getCurrentChildMapping",value:function(){var e=void 0===arguments[0]?this.props.children:arguments[0];return v["default"].getChildMapping(e)}},{key:"_hideElements",value:function(e){var t=this;e.forEach(function(e){var n=h["default"].findDOMNode(t.refs[e]);n.style.display="none"})}},{key:"_animate",value:function(e,t,n,r){if(!(e.length<=0)){var i=n.complete?function(){n.complete(),r()}:r;n=l["default"].extend(this.defaults,{complete:i},n),c["default"](e,t,n)}}},{key:"_animateWrapper",value:function(){this.props.wrapper&&(this._animate(h["default"].findDOMNode(this),{height:[this.totalHeight,this.lastTotalHeight]},this.props.wrapperOptions,null),this.lastTotalHeight=this.totalHeight)}},{key:"_appear",value:function(){var e=this,t=this.state.children,n=[];if(t){for(var r in t)t[r]&&(n.push(h["default"].findDOMNode(this.refs[r])),this.currentlyTransitioningKeys[r]=!0);var i=null!==this.props.appear?this.props.appear:this.props.enter,a=null!==this.props.appearOptions?this.props.appearOptions:this.props.enterOptions;this._animateWrapper(),this._animate(n,i,a,function(){for(var n in t)t[n]&&delete e.currentlyTransitioningKeys[n]})}}},{key:"_enter",value:function(e){var t=this,n=[];e.forEach(function(e){n.push(h["default"].findDOMNode(t.refs[e])),t.currentlyTransitioningKeys[e]=!0}),this._animate(n,this.props.enter,this.props.enterOptions,function(){e.forEach(function(e){delete t.currentlyTransitioningKeys[e]})})}},{key:"_leave",value:function(e,t){var n=this,r=function(){e.forEach(function(e){delete n.currentlyTransitioningKeys[e]}),n.setState(function(t){var n=l["default"].assign({},t.children);return e.forEach(function(e){delete n[e]}),{children:n}},t)},i=[];return e.length<=0&&t(),e.forEach(function(e){i.push(h["default"].findDOMNode(n.refs[e])),n.currentlyTransitioningKeys[e]=!0}),this.props.leave===!1?void r():void this._animate(i,this.props.leave,this.props.leaveOptions,r)}},{key:"render",value:function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];if(n){var r=h["default"].cloneElement(n,{ref:t,key:t});e.push(r)}}return h["default"].createElement(this.props.component,this.props,e)}}],[{key:"propTypes",value:{component:h["default"].PropTypes.any},enumerable:!0},{key:"defaultProps",value:{component:"span",appear:null,appearOptions:null,enter:{opacity:[1,0]},enterOptions:{},leave:{opacity:0},leaveOptions:{},defaults:{},wrapper:!1,wrapperOptions:{display:"block"}},enumerable:!0}]),VelocityTransitionGroup}(u.Component);t["default"]=VelocityTransitionGroup,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={assign:function(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a){var o=Object(a);for(var s in o)r.call(o,s)&&(n[s]=o[s])}}return n},extend:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];for(var r={},i=t.length,a=0;i>a;a++)if(t[a])for(var o in t[a])t[a].hasOwnProperty(o)&&(r[o]=t[a][o]);return r}},e.exports=t["default"]},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={getChildMapping:function(e){if(!e)return e;Array.isArray(e)||(e=[e]);var t={};return e.forEach(function(e){t[e.key]=e}),t},mergeChildMappings:function(){function e(e){return n.hasOwnProperty(e)?n[e]:t[e]}var t=void 0===arguments[0]?{}:arguments[0],n=void 0===arguments[1]?{}:arguments[1],r={},i=[];for(var a in t)n.hasOwnProperty(a)?i.length&&(r[a]=i,i=[]):i.push(a);var o={};for(var s in n){if(r.hasOwnProperty(s))for(var p=0;p<r[s].length;p++){var l=r[s][p];o[r[s][p]]=e(l)}o[s]=e(s)}for(var p=0;p<i.length;p++)o[i[p]]=e(i[p]);return o}},e.exports=t["default"]}])});