!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("velocity-animate")):"function"==typeof define&&define.amd?define(["react","velocity-animate"],e):"object"==typeof exports?exports.VelocityTransitionGroup=e(require("react"),require("velocity-animate")):t.VelocityTransitionGroup=e(t.React,t.Velocity)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="dist/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=r(i),o=n(2),s=r(o),p=n(3),u=r(p),l=n(4),h=r(l),VelocityTransitionGroup=s["default"].createClass({displayName:"VelocityTransitionGroup",propTypes:{component:s["default"].PropTypes.any},getDefaultProps:function(){return{component:"span",appear:null,appearOptions:null,enter:{opacity:[1,0]},enterOptions:{},leave:{opacity:0},leaveOptions:{},defaults:{},wrapper:!1}},getInitialState:function(){return{children:this._getCurrentChildMapping()}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[],this.prevChildMapping=null,this.nextChildMapping=null,this.totalHeight=0,this.defaults=a["default"].assign({display:"auto"},this.props.defaults)},componentDidMount:function(){this._appear()},componentWillReceiveProps:function(t){this.prevChildMapping=this.state.children,this.nextChildMapping=this._getCurrentChildMapping(t.children);var e=this.prevChildMapping,n=this.nextChildMapping;this.setState({children:h["default"].mergeChildMappings(e,n)});for(var r in n){var i=e&&e.hasOwnProperty(r);!n[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var r in e){var a=n&&n.hasOwnProperty(r);!e[r]||a||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},componentDidUpdate:function(){var t=this,e=this.keysToEnter;this.keysToEnter=[];var n=this.keysToLeave;this.keysToLeave=[],e.length<=0&&n.length<=0||(this.props.wrapper&&(this.totalHeight=0,this.totalHeight=this._getTotalHeight(this.nextChildMapping),this._hideElements(e)),n.length<=0?this._enter(e):this._leave(n,function(){t._enter(e)}))},_getTotalHeight:function(t){function e(t){var e=t.offsetHeight,n=getComputedStyle(t);return e+=parseInt(n.marginTop)+parseInt(n.marginBottom)}var n=0;for(var r in t){var i=s["default"].findDOMNode(this.refs[r]);n+=e(i)}return n},_getCurrentChildMapping:function(){var t=void 0===arguments[0]?this.props.children:arguments[0];return h["default"].getChildMapping(t)},_hideElements:function(t){var e=this;t.forEach(function(t){var n=s["default"].findDOMNode(e.refs[t]);n.style.display="none"})},_animate:function(t,e,n,r){if(!(t.length<=0)){var i=n.complete?function(){n.complete(),r()}:r;n=a["default"].assign(this.defaults,{complete:i},n),this.props.wrapper&&u["default"](s["default"].findDOMNode(this),{height:this.totalHeight},{display:"block",duration:n.duration}),u["default"](t,e,n)}},_appear:function(){var t=this,e=this.state.children,n=[];if(e){for(var r in e)e[r]&&(n.push(s["default"].findDOMNode(this.refs[r])),this.currentlyTransitioningKeys[r]=!0);var i=null!==this.props.appear?this.props.appear:this.props.enter,a=null!==this.props.appearOptions?this.props.appearOptions:this.props.enterOptions;this._animate(n,i,a,function(){for(var n in e)e[n]&&delete t.currentlyTransitioningKeys[n]})}},_enter:function(t){var e=this,n=[];t.forEach(function(t){n.push(s["default"].findDOMNode(e.refs[t])),e.currentlyTransitioningKeys[t]=!0}),this._animate(n,this.props.enter,this.props.enterOptions,function(){t.forEach(function(t){delete e.currentlyTransitioningKeys[t]})})},_leave:function(t,e){var n=this,r=function(){t.forEach(function(t){delete n.currentlyTransitioningKeys[t]}),n.setState(function(e){var n=a["default"].assign({},e.children);return t.forEach(function(t){delete n[t]}),{children:n}},e)},i=[];return t.length<=0&&e(),t.forEach(function(t){i.push(s["default"].findDOMNode(n.refs[t])),n.currentlyTransitioningKeys[t]=!0}),this.props.leave===!1?void r():void this._animate(i,this.props.leave,this.props.leaveOptions,r)},render:function(){var t=[];for(var e in this.state.children){var n=this.state.children[e];if(n){var r=s["default"].cloneElement(n,{ref:e,key:e});t.push(r)}}return s["default"].createElement(this.props.component,this.props,t)}});e["default"]=VelocityTransitionGroup,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={assign:function(t,e){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(t),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a){var o=Object(a);for(var s in o)r.call(o,s)&&(n[s]=o[s])}}return n}},t.exports=e["default"]},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(2),a=(r(i),{getChildMapping:function(t){if(!t)return t;Array.isArray(t)||(t=[t]);var e={};return t.forEach(function(t){e[t.key]=t}),e},mergeChildMappings:function(){function t(t){return n.hasOwnProperty(t)?n[t]:e[t]}var e=void 0===arguments[0]?{}:arguments[0],n=void 0===arguments[1]?{}:arguments[1],r={},i=[];for(var a in e)n.hasOwnProperty(a)?i.length&&(r[a]=i,i=[]):i.push(a);var o={};for(var s in n){if(r.hasOwnProperty(s))for(var p=0;p<r[s].length;p++){var u=r[s][p];o[r[s][p]]=t(u)}o[s]=t(s)}for(var p=0;p<i.length;p++)o[i[p]]=t(i[p]);return o}});t.exports=a}])});